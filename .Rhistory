knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(lubridate)
library(janitor)
library(purrr)
setwd("C:/Users/Tobyz/Desktop/S.tort-light-growth/Data")
files <- list.files(pattern = "WL2_size_survey.*\\.csv$")
safe_read_process <- safely(function(f) {
df <- read_csv(f, col_names = TRUE, show_col_types = FALSE) %>%
clean_names() %>%
mutate(
date = mdy(date),
bed_row = as.numeric(bed_row),
bed_col = as.character(bed_col),
height_cm = as.numeric(height_cm),
long_leaf_cm = if ("long_leaf_cm" %in% names(.)) as.numeric(as.character(long_leaf_cm)) else NA,
plant_id = paste(block, bed, bed_row, bed_col, sep = "_"),
source_file = f
)
return(df)
})
results <- map(files, safe_read_process)
successful_results <- keep(results, ~ !is.null(.x$result))
successful_data <- bind_rows(map(successful_results, "result"), .id = "source_index")
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable.txt", skip = 1, show_col_types = FALSE)
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable.txt", skip = 1, show_col_types = FALSE)
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable", skip = 1, show_col_types = FALSE)
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable.txt", skip = 1, show_col_types = FALSE)
library(tidyverse)
library(readxl)
library(lubridate)
library(janitor)
library(purrr)
setwd("C:/Users/Tobyz/Desktop/S.tort-light-growth/Data")
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable.txt", skip = 1, show_col_types = FALSE)
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable", skip = 1, show_col_types = FALSE)
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable.txt", skip = 1, show_col_types = FALSE)
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable.txt", skip = 1, show_col_types = FALSE)
files <- list.files(pattern = "WL2_size_survey.*\\.csv$")
safe_read_process <- safely(function(f) {
df <- read_csv(f, col_names = TRUE, show_col_types = FALSE) %>%
clean_names() %>%
mutate(
date = mdy(date),
bed_row = as.numeric(bed_row),
bed_col = as.character(bed_col),
height_cm = as.numeric(height_cm),
long_leaf_cm = if ("long_leaf_cm" %in% names(.)) as.numeric(as.character(long_leaf_cm)) else NA,
plant_id = paste(block, bed, bed_row, bed_col, sep = "_"),
source_file = f
)
return(df)
})
results <- map(files, safe_read_process)
successful_results <- keep(results, ~ !is.null(.x$result))
successful_data <- bind_rows(map(successful_results, "result"), .id = "source_index")
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable.txt", skip = 1, show_col_types = FALSE)
knitr::opts_chunk$set(echo = TRUE)
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable.txt", skip = 1, show_col_types = FALSE)
#weekly measurement
weekly_light <- light_raw %>%
mutate(
timestamp = ymd_hms(TIMESTAMP),
SlrW_Avg = as.numeric(SlrW_Avg),  # turn into number format
week = floor_date(timestamp, "week")
) %>%
group_by(week) %>%
summarise(
weekly_avg_SlrW = mean(SlrW_Avg, na.rm = TRUE),
.groups = "drop"
)
# result
print(weekly_light)
View(successful_results)
View(successful_data)
View(light_raw)
library(tidyverse)
library(readxl)
library(lubridate)
library(janitor)
library(purrr)
setwd("C:/Users/Tobyz/Desktop/S.tort-light-growth/Data")
files <- list.files(pattern = "WL2_size_survey.*\\.csv$")
safe_read_process <- safely(function(f) {
df <- read_csv(f, col_names = TRUE, show_col_types = FALSE) %>%
clean_names() %>%
mutate(
date = mdy(date),
bed_row = as.numeric(bed_row),
bed_col = as.character(bed_col),
height_cm = as.numeric(height_cm),
long_leaf_cm = if ("long_leaf_cm" %in% names(.)) as.numeric(as.character(long_leaf_cm)) else NA,
plant_id = paste(block, bed, bed_row, bed_col, sep = "_"),
source_file = f
)
return(df)
})
results <- map(files, safe_read_process)
successful_results <- keep(results, ~ !is.null(.x$result))
successful_data <- bind_rows(map(successful_results, "result"), .id = "source_index")
files <- list.files(pattern = "WL2_size_survey.*\\.csv$")
safe <- safely(function(f) {
df <- read_csv(f, col_names = TRUE, show_col_types = FALSE) %>%
clean_names() %>%
mutate(
date = mdy(date),
bed_row = as.numeric(bed_row),
bed_col = as.character(bed_col),
height_cm = as.numeric(height_cm),
long_leaf_cm = if ("long_leaf_cm" %in% names(.)) as.numeric(as.character(long_leaf_cm)) else NA,
plant_id = paste(block, bed, bed_row, bed_col, sep = "_"),
source_file = f
)
return(df)
})
results <- map(files, safe_read_process)
successful_results <- keep(results, ~ !is.null(.x$result))
successful_data <- bind_rows(map(successful_results, "result"), .id = "source_index")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(lubridate)
library(janitor)
library(purrr)
library(readr)
setwd("C:/Users/Tobyz/Desktop/S.tort-light-growth/Data")
#import
files <- list.files(pattern = "WL2_size_survey.*\\.csv$")
safe_read_process <- safely(function(f) {
df <- read_csv(f, col_types = cols(.default = "c")) %>%
clean_names()
df$source_file <- f
return(df)
})
results <- map(files, safe_read_process)
successful_results <- keep(results, ~ !is.null(.x$result))
successful_data <- bind_rows(map(successful_results, "result"), .id = "source_index")
#clean data
plant <- successful_data %>%
select(-starts_with("x"))%>%
mutate(
height_cm = parse_number(height_cm),
long_leaf_cm = parse_number(long_leaf_cm),
date=mdy(date)
)
library(tidyverse)
library(readxl)
library(lubridate)
library(janitor)
library(purrr)
library(readr)
setwd("C:/Users/Tobyz/Desktop/S.tort-light-growth/Data")
#import
files <- list.files(pattern = "WL2_size_survey.*\\.csv$")
#import
files <- list.files(path = "Data",pattern = "WL2_size_survey.*\\.csv$")
safe_read_process <- safely(function(f) {
df <- read_csv(f, col_types = cols(.default = "c")) %>%
clean_names()
df$source_file <- f
return(df)
})
results <- map(files, safe_read_process)
successful_results <- keep(results, ~ !is.null(.x$result))
successful_data <- bind_rows(map(successful_results, "result"), .id = "source_index")
#clean data
plant <- successful_data %>%
select(-starts_with("x"))%>%
mutate(
height_cm = parse_number(height_cm),
long_leaf_cm = parse_number(long_leaf_cm),
date=mdy(date)
)
View(results)
library(tidyverse)
library(readxl)
library(lubridate)
library(janitor)
library(purrr)
library(readr)
setwd("C:/Users/Tobyz/Desktop/S.tort-light-growth/Data")
#import
files <- list.files(path = "Data",pattern = "WL2_size_survey.*\\.csv$")
safe_read_process <- safely(function(f) {
df <- read_csv(f, col_types = cols(.default = "c")) %>%
clean_names()
df$source_file <- f
return(df)
})
results <- map(files, safe_read_process)
successful_results <- keep(results, ~ !is.null(.x$result))
successful_data <- bind_rows(map(successful_results, "result"), .id = "source_index")
#clean data
plant <- successful_data %>%
select(-starts_with("x"))%>%
mutate(
height_cm = parse_number(height_cm),
long_leaf_cm = parse_number(long_leaf_cm),
date=mdy(date)
)
#import
files <- list.files(path = "Data", pattern = "WL2_size_survey.*\\.csv$", full.names = TRUE)
safe_read_process <- safely(function(f) {
df <- read_csv(f, col_types = cols(.default = "c")) %>%
clean_names()
df$source_file <- f
return(df)
})
results <- map(files, safe_read_process)
successful_results <- keep(results, ~ !is.null(.x$result))
successful_data <- bind_rows(map(successful_results, "result"), .id = "source_index")
#clean data
plant <- successful_data %>%
select(-starts_with("x"))%>%
mutate(
height_cm = parse_number(height_cm),
long_leaf_cm = parse_number(long_leaf_cm),
date=mdy(date)
)
summary(plant)
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable.txt", skip = 1, show_col_types = FALSE)
library(tidyverse)
library(readxl)
library(lubridate)
library(janitor)
library(purrr)
library(readr)
#import
files <- list.files(path = "Data/", pattern = "WL2_size_survey_.*_corrected\\.csv", full.names = TRUE)
safe_read_process <- safely(function(f) {
df <- read_csv(f, col_types = cols(.default = "c")) %>%
clean_names()
df$source_file <- f
return(df)
})
results <- map(files, safe_read_process)
successful_results <- keep(results, ~ !is.null(.x$result))
successful_data <- bind_rows(map(successful_results, "result"), .id = "source_index")
#clean data
plant <- successful_data %>%
select(-starts_with("x"))%>%
mutate(
height_cm = parse_number(height_cm),
long_leaf_cm = parse_number(long_leaf_cm),
date=mdy(date)
)
summary(plant)
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable.txt", skip = 1, show_col_types = FALSE)
#import light data
light_raw <- read_csv("Data/IntBioHalfHourTable_clean.txt")
#weekly measurement
weekly_light <- light_raw %>%
mutate(
timestamp = ymd_hms(TIMESTAMP),
SlrW_Avg = as.numeric(SlrW_Avg),  # turn into number format
week = floor_date(timestamp, "week")
) %>%
group_by(week) %>%
summarise(
weekly_avg_SlrW = mean(SlrW_Avg, na.rm = TRUE),
.groups = "drop"
)
# result
print(weekly_light)
#import light data
light_raw <- read_csv("CR1000XSeries_IntBioHalfHourTable.txt", skip = 1, show_col_types = FALSE)
#import light data
light_raw <- read_csv("Data/IntBioHalfHourTable_clean.txt")
#weekly measurement
weekly_light <- light_raw %>%
mutate(
timestamp = ymd_hms(TIMESTAMP),
SlrW_Avg = as.numeric(SlrW_Avg),  # turn into number format
week = floor_date(timestamp, "week")
) %>%
group_by(week) %>%
summarise(
weekly_avg_SlrW = mean(SlrW_Avg, na.rm = TRUE),
.groups = "drop"
)
# result
print(weekly_light)
plant_growth <- plant %>%
filter(date %in% as.Date(c("2023-08-02", "2023-10-23"))) %>%
group_by(block, bed, bed_row, bed_col) %>%
arrange(date) %>%
summarise(
height_growth = diff(height_cm),
leaf_growth = diff(long_leaf_cm),
.groups = "drop"
)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(lubridate)
library(janitor)
library(purrr)
library(readr)
library(ggthemes)
#import
files <- list.files(path = "Data/", pattern = "WL2_size_survey_.*_corrected\\.csv", full.names = TRUE)
safe_read_process <- safely(function(f) {
df <- read_csv(f, col_types = cols(.default = "c")) %>%
clean_names()
df$source_file <- f
return(df)
})
results <- map(files, safe_read_process)
successful_results <- keep(results, ~ !is.null(.x$result))
successful_data <- bind_rows(map(successful_results, "result"), .id = "source_index")
#clean data
plant <- successful_data %>%
select(-starts_with("x"))%>%
mutate(
height_cm = parse_number(height_cm),
long_leaf_cm = parse_number(long_leaf_cm),
date=mdy(date)
)
summary(plant)
#import light data
light_raw <- read_csv("Data/IntBioHalfHourTable_clean.txt")
#weekly measurement
weekly_light <- light_raw %>%
mutate(
timestamp = ymd_hms(TIMESTAMP),
SlrW_Avg = as.numeric(SlrW_Avg),  # turn into number format
week = floor_date(timestamp, "week")
) %>%
group_by(week) %>%
summarise(
weekly_avg_SlrW = mean(SlrW_Avg, na.rm = TRUE),
.groups = "drop"
)
# result
print(weekly_light)
install.packages(ggthemes)
install.packages("ggthemes")
library(ggthemes)
plant_growth <- plant %>%
filter(date %in% as.Date(c("2023-08-02", "2023-10-23"))) %>%
group_by(block, bed, bed_row, bed_col) %>%
arrange(date) %>%
summarise(
height_growth = diff(height_cm),
leaf_growth = diff(long_leaf_cm),
.groups = "drop"
)
'''
plat_growth = plant |>
unite("PID", pop:rep, sep = "_") |> # create a unique plant ID
mutate(date_axis = format(date, "%b %e"),
date_axis = factor(date_axis, levels = unique(date_axis))) |>
select(PID, date_axis, height_cm)
'''
plat_growth = plant |>
unite("PID", pop:rep, sep = "_") |> # create a unique plant ID
mutate(date_axis = format(date, "%b %e"),
date_axis = factor(date_axis, levels = unique(date_axis))) |>
select(PID, date_axis, height_cm)
'''
# Will write this data once in a csv and read it in next time
# write_csv(plat_growth, "Data/plant_growth.csv")
plant_growth = read_csv("Data/plant_growth.csv")
ggplot(plat_growth, aes(x = date_axis, y = height_cm, group = PID)) +
geom_line() +
labs(title = "Growth Curve of Plants", x = "Date", y = "Height (cm)") +
theme_bw() +
theme(legend.position = "bottom")
plat_growth = plant |>
unite("PID", pop:rep, sep = "_") |> # create a unique plant ID
mutate(date_axis = format(date, "%b %e"),
date_axis = factor(date_axis, levels = unique(date_axis))) |>
select(PID, date_axis, height_cm)
# Will write this data once in a csv and read it in next time
# write_csv(plat_growth, "Data/plant_growth.csv")
plant_growth = read_csv("Data/plant_growth.csv")
ggplot(plat_growth, aes(x = date_axis, y = height_cm, group = PID)) +
geom_line() +
labs(title = "Growth Curve of Plants", x = "Date", y = "Height (cm)") +
theme_bw() +
theme(legend.position = "bottom")
View(plat_growth)
View(plant_growth)
View(plant_growth)
View(plant)
